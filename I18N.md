# jsdc-dui i18n å¤šåœ‹èªç³»å®Œæ•´æŒ‡å—

## ğŸ“– ç›®éŒ„
- [æ¦‚è¿°](#æ¦‚è¿°)
- [çµ¦é–‹ç™¼è€…ï¼šå°ˆæ¡ˆå¯¦ä½œèªªæ˜](#çµ¦é–‹ç™¼è€…å°ˆæ¡ˆå¯¦ä½œèªªæ˜)
- [çµ¦ä½¿ç”¨è€…ï¼šå¥—ä»¶ä½¿ç”¨æŒ‡å—](#çµ¦ä½¿ç”¨è€…å¥—ä»¶ä½¿ç”¨æŒ‡å—)

---

## æ¦‚è¿°

`jsdc-dui` å¥—ä»¶å·²æˆåŠŸæ•´åˆ `react-i18next` å¯¦ç¾å¤šåœ‹èªç³»åŠŸèƒ½ï¼Œæ”¯æ´**ç¹é«”ä¸­æ–‡ (zh-TW)** å’Œ**è‹±æ–‡ (en)**ã€‚

---

# çµ¦é–‹ç™¼è€…ï¼šå°ˆæ¡ˆå¯¦ä½œèªªæ˜

æœ¬ç¯€èªªæ˜ i18n åœ¨ jsdc-dui å°ˆæ¡ˆä¸­çš„å¯¦ä½œç´°ç¯€ã€‚

## å·²å®Œæˆçš„ä¿®æ”¹

### 1. å®‰è£å¥—ä»¶
- `i18next`: æ ¸å¿ƒ i18n æ¡†æ¶
- `react-i18next`: React æ•´åˆå¥—ä»¶

é€™å…©å€‹å¥—ä»¶å·²åŠ å…¥ `package.json` çš„ `dependencies` ä¸­ï¼Œä½¿ç”¨è€…å®‰è£ jsdc-dui æ™‚æœƒè‡ªå‹•å®‰è£ã€‚

### 2. æª”æ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ config.ts                    # i18n åˆå§‹åŒ–è¨­å®š
â”‚   â”œâ”€â”€ index.ts                     # Export æ‰€æœ‰ i18n åŠŸèƒ½
â”‚   â”œâ”€â”€ useTranslatedMenuItems.ts    # é¸å–®é …ç›®ç¿»è­¯ Hook
â”‚   â””â”€â”€ locales/
â”‚       â”œâ”€â”€ zh-TW.json              # ç¹é«”ä¸­æ–‡ç¿»è­¯
â”‚       â””â”€â”€ en.json                 # è‹±æ–‡ç¿»è­¯
â”œâ”€â”€ components/
â”‚   â””â”€â”€ LanguageSwitcher/           # èªè¨€åˆ‡æ›å™¨å…ƒä»¶
â”‚       â”œâ”€â”€ index.tsx
â”‚       â””â”€â”€ index.scss
```

### 3. å·²ç¿»è­¯çš„å…ƒç´ 

#### é¸å–®é …ç›®
- **åœ°åœ–åœ–å±¤** â†’ Map Layers
- **æ™¯é»ä»‹ç´¹** â†’ Attractions
- **æ°£è±¡é æ¸¬** â†’ Weather Forecast
- **åœ–ä¾‹èªªæ˜** â†’ Legend
- **è·¯ç·šä»‹ç´¹** â†’ Route Introduction
- **é—œæ–¼åœ–è‡º** â†’ About Platform

#### ç‰ˆæ¬Šæ–‡å­—
- **ç‰ˆæ¬Šæ‰€æœ‰ â’¸ {{year}}** â†’ Copyright â’¸ {{year}}
- **å¹³å°å…§å®¹ç¶­è­·ï½œæ™ºç´³æ•¸ä½æ–‡åŒ–äº‹æ¥­æœ‰é™å…¬å¸** â†’ Platform Maintenance | JRSHEN Digital Culture Co., Ltd.
- **Design by someDesign** â†’ Design by someDesign

### 4. ä¿®æ”¹çš„å…ƒä»¶æª”æ¡ˆ

- [src/components/LeftMenuBar/Layer/LayerMenuItem.tsx](src/components/LeftMenuBar/Layer/LayerMenuItem.tsx)
- [src/components/LeftMenuBar/Scene/SceneMenuItem.tsx](src/components/LeftMenuBar/Scene/SceneMenuItem.tsx)
- [src/components/LeftMenuBar/Weather/WeatherMenuItem.tsx](src/components/LeftMenuBar/Weather/WeatherMenuItem.tsx)
- [src/components/LeftMenuBar/Legend/LegendMenuItem.tsx](src/components/LeftMenuBar/Legend/LegendMenuItem.tsx)
- [src/components/LeftMenuBar/AboutWalk/AboutWalkMenuItem.tsx](src/components/LeftMenuBar/AboutWalk/AboutWalkMenuItem.tsx)
- [src/components/LeftMenuBar/Credit/CreditMenuItem.tsx](src/components/LeftMenuBar/Credit/CreditMenuItem.tsx)
- [src/components/MapViewContainer/index.tsx](src/components/MapViewContainer/index.tsx)
- [src/index.tsx](src/index.tsx) (åˆå§‹åŒ– i18n)

### 5. Build è¨­å®š

åœ¨ [rollup.config.js](rollup.config.js) ä¸­å·²åŠ å…¥ i18n ç›®éŒ„å’Œ JSON ç¿»è­¯æª”æ¡ˆï¼š

```javascript
input: [
  ...getFiles('./src/components', extensions),
  ...getFiles('./src/i18n', extensions),  // â† åŠ å…¥ i18n
  './src/i18n/locales/zh-TW.json',        // â† JSON ç¿»è­¯æª”
  './src/i18n/locales/en.json',
],
```

Build å¾Œ i18n æª”æ¡ˆæœƒå‡ºç¾åœ¨ `dist/i18n/` ç›®éŒ„ã€‚

### 6. é–‹ç™¼æ™‚ä½¿ç”¨

åœ¨å°ˆæ¡ˆé–‹ç™¼æ™‚ä½¿ç”¨ç¿»è­¯ï¼š

```typescript
import { useTranslation } from 'react-i18next'

function MyComponent() {
  const { t } = useTranslation()
  return <div>{t('menu.mapLayer')}</div>
}
```

æ–°å¢ç¿»è­¯å…§å®¹ï¼š

1. åœ¨ `src/i18n/locales/zh-TW.json` å’Œ `en.json` ä¸­æ–°å¢éµå€¼
2. åœ¨å…ƒä»¶ä¸­ä½¿ç”¨ `t('your.key')`

### 7. æ³¨æ„äº‹é …

1. **TypeScript è­¦å‘Š**: ç”±æ–¼å°ˆæ¡ˆä½¿ç”¨ TypeScript 4.6.3ï¼Œè€Œ i18next ä½¿ç”¨è¼ƒæ–°çš„å‹åˆ¥ç‰¹æ€§ï¼Œbuild æ™‚æœƒå‡ºç¾ä¸€äº›å‹åˆ¥è­¦å‘Šã€‚é€™äº›è­¦å‘Šä¸æœƒå½±éŸ¿åŠŸèƒ½é‹ä½œã€‚

2. **Build æˆåŠŸ**: å°ˆæ¡ˆå·²æˆåŠŸ buildï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œã€‚

3. **æ“´å……æ€§**: è‹¥è¦æ–°å¢å…¶ä»–èªè¨€ï¼š
   - åœ¨ `src/i18n/locales/` æ–°å¢ JSON æª”æ¡ˆï¼ˆå¦‚ `ja.json`ï¼‰
   - åœ¨ `src/i18n/config.ts` çš„ resources ä¸­è¨»å†Šæ–°èªè¨€
   - åœ¨ `rollup.config.js` çš„ input ä¸­åŠ å…¥æ–°çš„ JSON æª”æ¡ˆ
   - åœ¨ `LanguageSwitcher` å…ƒä»¶ä¸­æ–°å¢å°æ‡‰çš„æŒ‰éˆ•

---

# çµ¦ä½¿ç”¨è€…ï¼šå¥—ä»¶ä½¿ç”¨æŒ‡å—

æœ¬ç¯€èªªæ˜å¦‚ä½•åœ¨ä½ çš„å°ˆæ¡ˆä¸­ä½¿ç”¨ jsdc-dui çš„å¤šåœ‹èªç³»åŠŸèƒ½ã€‚

## å®‰è£

```bash
npm install jsdc-dui
# æˆ–
yarn add jsdc-dui
```

å®‰è£ jsdc-dui æ™‚æœƒè‡ªå‹•å®‰è£ `i18next` å’Œ `react-i18next` ä¾è³´ã€‚

## âš ï¸ é‡è¦ï¼šåˆå§‹åŒ– i18n

**åœ¨ä½ çš„å°ˆæ¡ˆä¸­ä½¿ç”¨ jsdc-dui å…ƒä»¶å‰ï¼Œå¿…é ˆå…ˆåˆå§‹åŒ– i18nã€‚**

å¦‚æœæ²’æœ‰åˆå§‹åŒ–ï¼Œå…ƒä»¶æœƒé¡¯ç¤ºç¿»è­¯éµå€¼ï¼ˆå¦‚ `menu.mapLayer`ï¼‰è€Œä¸æ˜¯å¯¦éš›æ–‡å­—ã€‚

### æ–¹æ³• 1ï¼šä½¿ç”¨å¥—ä»¶å…§å»ºçš„ i18n è¨­å®šï¼ˆæ¨è–¦ï¼‰

åœ¨ä½ çš„å°ˆæ¡ˆå…¥å£æª”æ¡ˆï¼ˆå¦‚ `src/index.tsx` æˆ– `src/App.tsx`ï¼‰**æœ€ä¸Šæ–¹**åŠ å…¥ï¼š

```typescript
// âš ï¸ å¿…é ˆåœ¨æœ€é–‹å§‹åŒ¯å…¥ï¼Œåœ¨ä»»ä½•å…¶ä»– import ä¹‹å‰
import 'jsdc-dui/dist/i18n/config'

// ç„¶å¾Œæ‰åŒ¯å…¥å…¶ä»–æ±è¥¿
import React from 'react'
import ReactDOM from 'react-dom'
import App from './App'

ReactDOM.render(<App />, document.getElementById('root'))
```

### æ–¹æ³• 2ï¼šè‡ªè¨‚ i18n è¨­å®š

å¦‚æœä½ æƒ³è¦è‡ªè¨‚ç¿»è­¯å…§å®¹æˆ–æ–°å¢æ›´å¤šèªè¨€ï¼š

**æ­¥é©Ÿ 1**: å»ºç«‹ `src/i18n.ts` æˆ– `src/i18n/index.ts`ï¼š

```typescript
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'

// å°å…¥ jsdc-dui çš„ç¿»è­¯
import jsdcZhTW from 'jsdc-dui/dist/i18n/locales/zh-TW.json'
import jsdcEn from 'jsdc-dui/dist/i18n/locales/en.json'

// ä½ çš„è‡ªè¨‚ç¿»è­¯
const customZhTW = {
  ...jsdcZhTW,
  // åŠ å…¥ä½ è‡ªå·±çš„ç¿»è­¯
  myApp: {
    title: 'æˆ‘çš„æ‡‰ç”¨ç¨‹å¼',
    welcome: 'æ­¡è¿ä½¿ç”¨'
  }
}

const customEn = {
  ...jsdcEn,
  myApp: {
    title: 'My Application',
    welcome: 'Welcome'
  }
}

i18n
  .use(initReactI18next)
  .init({
    resources: {
      'zh-TW': {
        translation: customZhTW,
      },
      'en': {
        translation: customEn,
      },
      // å¯ä»¥æ–°å¢æ›´å¤šèªè¨€
      'ja': {
        translation: {
          ...jsdcZhTW, // å…ˆç”¨ä¸­æ–‡ç•¶ fallback
          menu: {
            mapLayer: 'ãƒãƒƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼',
            sceneIntro: 'ã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³',
            weatherForecast: 'å¤©æ°—äºˆå ±',
            legendDescription: 'å‡¡ä¾‹',
            routeIntro: 'ãƒ«ãƒ¼ãƒˆç´¹ä»‹',
            aboutPlatform: 'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ã¤ã„ã¦',
          },
          myApp: {
            title: 'ãƒã‚¤ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³',
            welcome: 'ã‚ˆã†ã“ã'
          }
        }
      }
    },
    lng: 'zh-TW', // é è¨­èªè¨€
    fallbackLng: 'zh-TW',
    interpolation: {
      escapeValue: false,
    },
  })

export default i18n
```

**æ­¥é©Ÿ 2**: åœ¨å…¥å£æª”æ¡ˆåŒ¯å…¥ï¼š

```typescript
// âš ï¸ å¿…é ˆåœ¨æœ€é–‹å§‹åŒ¯å…¥
import './i18n'

import React from 'react'
import ReactDOM from 'react-dom'
import App from './App'
// ... å…¶ä»–ç¨‹å¼ç¢¼
```

## ä½¿ç”¨èªè¨€åˆ‡æ›å™¨

jsdc-dui æä¾›äº†å…§å»ºçš„èªè¨€åˆ‡æ›å™¨å…ƒä»¶ï¼š

```typescript
import { LanguageSwitcher } from 'jsdc-dui/dist/components/LanguageSwitcher'

function App() {
  return (
    <div>
      <header>
        <h1>æˆ‘çš„æ‡‰ç”¨ç¨‹å¼</h1>
        <LanguageSwitcher />
      </header>
      {/* å…¶ä»–å…ƒä»¶ */}
    </div>
  )
}
```

## å·²ç¿»è­¯çš„å…ƒä»¶

ä»¥ä¸‹ jsdc-dui å…ƒä»¶æœƒæ ¹æ“š i18n è¨­å®šè‡ªå‹•é¡¯ç¤ºå°æ‡‰èªè¨€ï¼š

| å…ƒä»¶ | ç¹é«”ä¸­æ–‡ | English |
|------|---------|---------|
| `LayerMenuItem` | åœ°åœ–åœ–å±¤ | Map Layers |
| `SceneMenuItem` | æ™¯é»ä»‹ç´¹ | Attractions |
| `WeatherMenuItem` | æ°£è±¡é æ¸¬ | Weather Forecast |
| `LegendMenuItem` | åœ–ä¾‹èªªæ˜ | Legend |
| `AboutWalkMenuItem` | è·¯ç·šä»‹ç´¹ | Route Introduction |
| `CreditMenuItem` | é—œæ–¼åœ–è‡º | About Platform |
| `MapViewContainer` | ç‰ˆæ¬Šæ–‡å­— | Copyright text |

## ç¿»è­¯éµå€¼å°ç…§è¡¨

| éµå€¼ | ç¹é«”ä¸­æ–‡ | English |
|------|---------|---------|
| `menu.mapLayer` | åœ°åœ–åœ–å±¤ | Map Layers |
| `menu.sceneIntro` | æ™¯é»ä»‹ç´¹ | Attractions |
| `menu.weatherForecast` | æ°£è±¡é æ¸¬ | Weather Forecast |
| `menu.legendDescription` | åœ–ä¾‹èªªæ˜ | Legend |
| `menu.routeIntro` | è·¯ç·šä»‹ç´¹ | Route Introduction |
| `menu.aboutPlatform` | é—œæ–¼åœ–è‡º | About Platform |
| `copyright.text` | ç‰ˆæ¬Šæ‰€æœ‰ â’¸ {{year}} | Copyright â’¸ {{year}} |
| `copyright.maintenance` | å¹³å°å…§å®¹ç¶­è­·ï½œæ™ºç´³æ•¸ä½æ–‡åŒ–äº‹æ¥­æœ‰é™å…¬å¸/ | Platform Maintenance \| JRSHEN Digital Culture Co., Ltd. / |
| `copyright.design` | Design by someDesign | Design by someDesign |

## åœ¨ä½ çš„å…ƒä»¶ä¸­ä½¿ç”¨ç¿»è­¯

ä½ å¯ä»¥åœ¨è‡ªå·±çš„å…ƒä»¶ä¸­ä½¿ç”¨ jsdc-dui çš„ç¿»è­¯ï¼š

```typescript
import { useTranslation } from 'react-i18next'

function MyComponent() {
  const { t, i18n } = useTranslation()

  return (
    <div>
      <h1>{t('menu.mapLayer')}</h1>
      <p>ç•¶å‰èªè¨€: {i18n.language}</p>

      <button onClick={() => i18n.changeLanguage('en')}>
        Switch to English
      </button>
      <button onClick={() => i18n.changeLanguage('zh-TW')}>
        åˆ‡æ›åˆ°ä¸­æ–‡
      </button>
    </div>
  )
}
```

### ä½¿ç”¨åƒæ•¸åŒ–ç¿»è­¯

```typescript
// åœ¨ç¿»è­¯æª”æ¡ˆä¸­
{
  "greeting": "ä½ å¥½, {{name}}!",
  "itemCount": "ä½ æœ‰ {{count}} å€‹é …ç›®"
}

// åœ¨å…ƒä»¶ä¸­
const { t } = useTranslation()

t('greeting', { name: 'å¼µä¸‰' })           // "ä½ å¥½, å¼µä¸‰!"
t('itemCount', { count: 5 })             // "ä½ æœ‰ 5 å€‹é …ç›®"
t('copyright.text', { year: 2025 })      // "ç‰ˆæ¬Šæ‰€æœ‰ â’¸ 2025"
```

## å¸¸è¦‹å•é¡Œ

### Q: ç‚ºä»€éº¼å…ƒä»¶é¡¯ç¤º `menu.mapLayer` è€Œä¸æ˜¯æ–‡å­—ï¼Ÿ

**A**: é€™è¡¨ç¤º i18n æ²’æœ‰è¢«æ­£ç¢ºåˆå§‹åŒ–ã€‚è«‹ç¢ºèªï¼š

1. âœ… åœ¨å…¥å£æª”æ¡ˆ**æœ€ä¸Šæ–¹**æœ‰ `import 'jsdc-dui/dist/i18n/config'`
2. âœ… é€™è¡Œ import å¿…é ˆåœ¨**ä»»ä½•å…¶ä»– import ä¹‹å‰**
3. âœ… æª¢æŸ¥ç€è¦½å™¨ console æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯

**éŒ¯èª¤ç¯„ä¾‹** âŒï¼š
```typescript
import React from 'react'
import 'jsdc-dui/dist/i18n/config'  // âŒ å¤ªæ™šäº†
```

**æ­£ç¢ºç¯„ä¾‹** âœ…ï¼š
```typescript
import 'jsdc-dui/dist/i18n/config'  // âœ… ç¬¬ä¸€è¡Œ
import React from 'react'
```

### Q: å¯ä»¥åªä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡å—ï¼Ÿ

**A**: å¯ä»¥ã€‚åœ¨åˆå§‹åŒ– i18n æ™‚ï¼Œåªéœ€è¨­å®šä½ æƒ³è¦çš„èªè¨€ï¼š

```typescript
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import zhTW from 'jsdc-dui/dist/i18n/locales/zh-TW.json'

i18n
  .use(initReactI18next)
  .init({
    resources: {
      'zh-TW': {
        translation: zhTW,
      }
    },
    lng: 'zh-TW',
    fallbackLng: 'zh-TW',
    interpolation: {
      escapeValue: false,
    },
  })
```

### Q: å¦‚ä½•æ–°å¢å…¶ä»–èªè¨€ï¼ˆå¦‚æ—¥æ–‡ã€éŸ“æ–‡ï¼‰ï¼Ÿ

**A**: åƒè€ƒã€Œæ–¹æ³• 2ï¼šè‡ªè¨‚ i18n è¨­å®šã€ï¼Œåœ¨ resources ä¸­æ–°å¢å°æ‡‰çš„èªè¨€ä¸¦æä¾›æ‰€æœ‰ç¿»è­¯éµå€¼ã€‚

### Q: å¯ä»¥è¦†è“‹é è¨­ç¿»è­¯å—ï¼Ÿ

**A**: å¯ä»¥ã€‚ä½¿ç”¨æ–¹æ³• 2 è‡ªè¨‚ i18n è¨­å®šï¼Œä¸¦è¦†è“‹å°æ‡‰çš„éµå€¼ï¼š

```typescript
const customZhTW = {
  ...jsdcZhTW,
  menu: {
    ...jsdcZhTW.menu,
    mapLayer: 'åœ°åœ–åœ–å±¤ç®¡ç†',  // è¦†è“‹é è¨­ç¿»è­¯
  }
}
```

### Q: èªè¨€åå¥½æœƒè¢«å„²å­˜å—ï¼Ÿ

**A**: é è¨­æƒ…æ³ä¸‹ï¼Œi18next æœƒå°‡èªè¨€åå¥½å„²å­˜åœ¨ç€è¦½å™¨çš„ localStorage ä¸­ã€‚ä½¿ç”¨è€…åˆ‡æ›èªè¨€å¾Œï¼Œä¸‹æ¬¡é–‹å•Ÿç¶²é æœƒè‡ªå‹•ä½¿ç”¨ä¸Šæ¬¡é¸æ“‡çš„èªè¨€ã€‚

å¦‚æœæƒ³è¦åœç”¨æ­¤åŠŸèƒ½ï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–æ™‚è¨­å®šï¼š

```typescript
i18n.init({
  // ...
  detection: {
    caches: []  // ä¸å„²å­˜åˆ° localStorage
  }
})
```

## ç¯„ä¾‹å°ˆæ¡ˆ

å®Œæ•´çš„ä½¿ç”¨ç¯„ä¾‹å¯åƒè€ƒï¼š
- jsdc-dui åŸå§‹ç¢¼ä¸­çš„ [src/index.tsx](src/index.tsx)
- å„å€‹ MenuItem å…ƒä»¶çš„å¯¦ä½œ

## æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹è‡³ GitHub Issues å›å ±ï¼š
[https://github.com/60723005l/jsdc-dui/issues](https://github.com/60723005l/jsdc-dui/issues)

---

## æ¸¬è©¦

åŸ·è¡Œä»¥ä¸‹å‘½ä»¤æ¸¬è©¦ï¼š

```bash
# é–‹ç™¼æ¨¡å¼
npm start

# å»ºç½®
npm run build
```

## æœªä¾†æ”¹é€²å»ºè­°

1. å°‡æ›´å¤šç¡¬ç·¨ç¢¼æ–‡å­—ç§»è‡³ç¿»è­¯æª”æ¡ˆ
2. ç‚ºæ™¯é»ä»‹ç´¹ã€è·¯ç·šèªªæ˜ç­‰å‹•æ…‹å…§å®¹å¯¦ä½œå¤šèªç³»æ”¯æ´
3. è€ƒæ…®å‡ç´š TypeScript ç‰ˆæœ¬ä»¥æ¶ˆé™¤å‹åˆ¥è­¦å‘Šï¼ˆéœ€è©•ä¼°å°ˆæ¡ˆç›¸å®¹æ€§ï¼‰
4. æä¾›æ›´å¤šå…§å»ºèªè¨€æ”¯æ´ï¼ˆæ—¥æ–‡ã€éŸ“æ–‡ç­‰ï¼‰
