import t from"../utils.js";import e from"../helpers/buildURL.js";import r from"./InterceptorManager.js";import o from"./dispatchRequest.js";import s from"./mergeConfig.js";import a from"./buildFullPath.js";import n from"../helpers/validator.js";import i from"./AxiosHeaders.js";const l=n.validators;class c{constructor(t){this.defaults=t||{},this.interceptors={request:new r,response:new r}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const r=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?r&&!String(t.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+r):t.stack=r}catch(t){}}throw t}}_request(e,r){"string"==typeof e?(r=r||{}).url=e:r=e||{},r=s(this.defaults,r);const{transitional:a,paramsSerializer:c,headers:u}=r;void 0!==a&&n.assertOptions(a,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1),null!=c&&(t.isFunction(c)?r.paramsSerializer={serialize:c}:n.assertOptions(c,{encode:l.function,serialize:l.function},!0)),void 0!==r.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),n.assertOptions(r,{baseUrl:l.spelling("baseURL"),withXsrfToken:l.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let h=u&&t.merge(u.common,u[r.method]);u&&t.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete u[t]})),r.headers=i.concat(h,u);const p=[];let f=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(r)||(f=f&&t.synchronous,p.unshift(t.fulfilled,t.rejected))}));const d=[];let m;this.interceptors.response.forEach((function(t){d.push(t.fulfilled,t.rejected)}));let g,b=0;if(!f){const t=[o.bind(this),void 0];for(t.unshift(...p),t.push(...d),g=t.length,m=Promise.resolve(r);b<g;)m=m.then(t[b++],t[b++]);return m}g=p.length;let w=r;for(;b<g;){const t=p[b++],e=p[b++];try{w=t(w)}catch(t){e.call(this,t);break}}try{m=o.call(this,w)}catch(t){return Promise.reject(t)}for(b=0,g=d.length;b<g;)m=m.then(d[b++],d[b++]);return m}getUri(t){t=s(this.defaults,t);const r=a(t.baseURL,t.url,t.allowAbsoluteUrls);return e(r,t.params,t.paramsSerializer)}}t.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,r){return this.request(s(r||{},{method:t,url:e,data:(r||{}).data}))}})),t.forEach(["post","put","patch"],(function(t){function e(e){return function(r,o,a){return this.request(s(a||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}c.prototype[t]=e(),c.prototype[t+"Form"]=e(!0)}));var u=c;export{u as default};
//# sourceMappingURL=Axios.js.map
