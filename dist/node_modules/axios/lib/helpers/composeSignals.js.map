{"version":3,"file":"composeSignals.js","sources":["../../../../../node_modules/axios/lib/helpers/composeSignals.js"],"sourcesContent":["import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n"],"names":["composeSignals$1","signals","timeout","length","filter","Boolean","aborted","controller","AbortController","onabort","reason","unsubscribe","err","Error","this","abort","AxiosError","CanceledError","message","timer","setTimeout","ETIMEDOUT","clearTimeout","forEach","signal","removeEventListener","addEventListener","utils","asap"],"mappings":"0GA+CA,IAAAA,EA3CuB,CAACC,EAASC,KAC/B,MAAMC,OAACA,GAAWF,EAAUA,EAAUA,EAAQG,OAAOC,SAAW,GAEhE,GAAIH,GAAWC,EAAQ,CACrB,IAEIG,EAFAC,EAAa,IAAIC,gBAIrB,MAAMC,EAAU,SAAUC,GACxB,IAAKJ,EAAS,CACZA,GAAU,EACVK,IACA,MAAMC,EAAMF,aAAkBG,MAAQH,EAASI,KAAKJ,OACpDH,EAAWQ,MAAMH,aAAeI,EAAaJ,EAAM,IAAIK,EAAcL,aAAeC,MAAQD,EAAIM,QAAUN,MAI9G,IAAIO,EAAQjB,GAAWkB,YAAW,KAChCD,EAAQ,KACRV,EAAQ,IAAIO,EAAW,WAAWd,mBAA0Bc,EAAWK,cACtEnB,GAEH,MAAMS,EAAc,KACdV,IACFkB,GAASG,aAAaH,GACtBA,EAAQ,KACRlB,EAAQsB,SAAQC,IACdA,EAAOb,YAAca,EAAOb,YAAYF,GAAWe,EAAOC,oBAAoB,QAAShB,MAEzFR,EAAU,OAIdA,EAAQsB,SAASC,GAAWA,EAAOE,iBAAiB,QAASjB,KAE7D,MAAMe,OAACA,GAAUjB,EAIjB,OAFAiB,EAAOb,YAAc,IAAMgB,EAAMC,KAAKjB,GAE/Ba"}