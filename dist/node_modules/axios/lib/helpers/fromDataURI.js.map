{"version":3,"file":"fromDataURI.js","sources":["../../../../../node_modules/axios/lib/helpers/fromDataURI.js"],"sourcesContent":["'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport parseProtocol from './parseProtocol.js';\nimport platform from '../platform/index.js';\n\nconst DATA_URL_PATTERN = /^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\\s\\S]*)$/;\n\n/**\n * Parse data uri to a Buffer or Blob\n *\n * @param {String} uri\n * @param {?Boolean} asBlob\n * @param {?Object} options\n * @param {?Function} options.Blob\n *\n * @returns {Buffer|Blob}\n */\nexport default function fromDataURI(uri, asBlob, options) {\n  const _Blob = options && options.Blob || platform.classes.Blob;\n  const protocol = parseProtocol(uri);\n\n  if (asBlob === undefined && _Blob) {\n    asBlob = true;\n  }\n\n  if (protocol === 'data') {\n    uri = protocol.length ? uri.slice(protocol.length + 1) : uri;\n\n    const match = DATA_URL_PATTERN.exec(uri);\n\n    if (!match) {\n      throw new AxiosError('Invalid URL', AxiosError.ERR_INVALID_URL);\n    }\n\n    const mime = match[1];\n    const isBase64 = match[2];\n    const body = match[3];\n    const buffer = Buffer.from(decodeURIComponent(body), isBase64 ? 'base64' : 'utf8');\n\n    if (asBlob) {\n      if (!_Blob) {\n        throw new AxiosError('Blob is not supported', AxiosError.ERR_NOT_SUPPORT);\n      }\n\n      return new _Blob([buffer], {type: mime});\n    }\n\n    return buffer;\n  }\n\n  throw new AxiosError('Unsupported protocol ' + protocol, AxiosError.ERR_NOT_SUPPORT);\n}\n"],"names":["DATA_URL_PATTERN","fromDataURI","uri","asBlob","options","_Blob","Blob","platform","classes","protocol","parseProtocol","undefined","length","slice","match","exec","AxiosError","ERR_INVALID_URL","mime","isBase64","body","buffer","Buffer","from","decodeURIComponent","ERR_NOT_SUPPORT","type"],"mappings":"2GAMA,MAAMA,EAAmB,gDAYV,SAASC,EAAYC,EAAKC,EAAQC,GAC/C,MAAMC,EAAQD,GAAWA,EAAQE,MAAQC,EAASC,QAAQF,KACpDG,EAAWC,EAAcR,GAM/B,QAJeS,IAAXR,GAAwBE,IAC1BF,GAAS,GAGM,SAAbM,EAAqB,CACvBP,EAAMO,EAASG,OAASV,EAAIW,MAAMJ,EAASG,OAAS,GAAKV,EAEzD,MAAMY,EAAQd,EAAiBe,KAAKb,GAEpC,IAAKY,EACH,MAAM,IAAIE,EAAW,cAAeA,EAAWC,iBAGjD,MAAMC,EAAOJ,EAAM,GACbK,EAAWL,EAAM,GACjBM,EAAON,EAAM,GACbO,EAASC,OAAOC,KAAKC,mBAAmBJ,GAAOD,EAAW,SAAW,QAE3E,GAAIhB,EAAQ,CACV,IAAKE,EACH,MAAM,IAAIW,EAAW,wBAAyBA,EAAWS,iBAG3D,OAAO,IAAIpB,EAAM,CAACgB,GAAS,CAACK,KAAMR,IAGpC,OAAOG,EAGT,MAAM,IAAIL,EAAW,wBAA0BP,EAAUO,EAAWS"}