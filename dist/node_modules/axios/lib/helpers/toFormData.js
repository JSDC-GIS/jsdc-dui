import t from"../utils.js";import n from"../core/AxiosError.js";import e from"../../node_modules/form-data/lib/form_data.js";function i(n){return t.isPlainObject(n)||t.isArray(n)}function r(n){return t.endsWith(n,"[]")?n.slice(0,-2):n}function o(t,n,e){return t?t.concat(n).map((function(t,n){return t=r(t),!e&&n?"["+t+"]":t})).join(e?".":""):n}const s=t.toFlatObject(t,{},null,(function(t){return/^is[A-Z]/.test(t)}));function f(f,u,a){if(!t.isObject(f))throw new TypeError("target must be an object");u=u||new(e||FormData);const c=(a=t.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(n,e){return!t.isUndefined(e[n])}))).metaTokens,l=a.visitor||j,d=a.dots,p=a.indexes,b=(a.Blob||"undefined"!=typeof Blob&&Blob)&&t.isSpecCompliantForm(u);if(!t.isFunction(l))throw new TypeError("visitor must be a function");function m(e){if(null===e)return"";if(t.isDate(e))return e.toISOString();if(t.isBoolean(e))return e.toString();if(!b&&t.isBlob(e))throw new n("Blob is not supported. Use a Buffer instead.");return t.isArrayBuffer(e)||t.isTypedArray(e)?b&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function j(n,e,s){let f=n;if(n&&!s&&"object"==typeof n)if(t.endsWith(e,"{}"))e=c?e:e.slice(0,-2),n=JSON.stringify(n);else if(t.isArray(n)&&function(n){return t.isArray(n)&&!n.some(i)}(n)||(t.isFileList(n)||t.endsWith(e,"[]"))&&(f=t.toArray(n)))return e=r(e),f.forEach((function(n,i){!t.isUndefined(n)&&null!==n&&u.append(!0===p?o([e],i,d):null===p?e:e+"[]",m(n))})),!1;return!!i(n)||(u.append(o(s,e,d),m(n)),!1)}const y=[],h=Object.assign(s,{defaultVisitor:j,convertValue:m,isVisitable:i});if(!t.isObject(f))throw new TypeError("data must be an object");return function n(e,i){if(!t.isUndefined(e)){if(-1!==y.indexOf(e))throw Error("Circular reference detected in "+i.join("."));y.push(e),t.forEach(e,(function(e,r){!0===(!(t.isUndefined(e)||null===e)&&l.call(u,e,t.isString(r)?r.trim():r,i,h))&&n(e,i?i.concat(r):[r])})),y.pop()}}(f),u}export{f as default};
//# sourceMappingURL=toFormData.js.map
