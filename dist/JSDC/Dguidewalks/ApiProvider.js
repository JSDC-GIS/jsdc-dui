import{__awaiter as t,__generator as e}from"../../node_modules/tslib/tslib.es6.js";var r=function(){function r(r){var n=this;this.getProxyQuery=function(r){return t(n,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=this.proxyApiUrl,[4,fetch("".concat(t,"?proxy=").concat(r))];case 1:return[4,e.sent().text()];case 2:return[2,e.sent()]}}))}))},this.baseUrl=r.baseApiUrl,this.eventId=r.eventId,this.cmsPath=r.cmsPath||""}return Object.defineProperty(r.prototype,"layersApiUrl",{get:function(){return"".concat(this.baseUrl,"event/").concat(this.eventId,"/layers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"basemapsUrl",{get:function(){return"".concat(this.baseUrl,"event/").concat(this.eventId,"/basemaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"counterUrl",{get:function(){return"https://map.jsdc.com.tw/tools/counter/".concat(this.eventId,"/")},enumerable:!1,configurable:!0}),r.prototype.getVisitorCount=function(){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=this.counterUrl,console.log("[visit count]: ".concat(t)),[4,fetch(t)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},r.prototype.getLayers=function(){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=this.layersApiUrl,[4,fetch(t)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},r.prototype.getBasemaps=function(){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=this.basemapsUrl,[4,fetch(t)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},Object.defineProperty(r.prototype,"proxyApiUrl",{get:function(){return"".concat(this.baseUrl,"jsdc-proxy/")},enumerable:!1,configurable:!0}),r}();export{r as default};
//# sourceMappingURL=ApiProvider.js.map
