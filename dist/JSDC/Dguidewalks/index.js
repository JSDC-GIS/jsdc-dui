import{__awaiter as e,__generator as t,__spreadArray as r}from"../../node_modules/tslib/tslib.es6.js";import{omit as i}from"lodash";import n from"./ApiProvider.js";import o from"./createLayer/createTileLayer.js";import a from"./createLayer/createGeoJSONLayer.js";import s from"../utils/Event.js";var u=function(){function u(e){this.gisDataLoadEvent=new s,this.config=e.config,this.api=new n(this.config),this.layerNameOrder=e.layerNameOrder||[],this.articleProxyParser=e.articleParser}return Object.defineProperty(u.prototype,"eventId",{get:function(){return this.config.eventId},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"baseApiUrl",{get:function(){return this.config.baseApiUrl},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"configProvider",{get:function(){return this.config},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"apiProvider",{get:function(){return this.api},enumerable:!1,configurable:!0}),u.prototype.loadGisData=function(){return e(this,void 0,void 0,(function(){var e,n,s,u;return t(this,(function(t){switch(t.label){case 0:return[4,(e=this.apiProvider).getLayers()];case 1:return n=t.sent(),[4,e.getBasemaps()];case 2:return s=t.sent(),u=[],n.forEach((function(e){var t=i(e,["Basemap","LineFeatures","PointFeatures","PolygonFeatures"]),r=e.LineFeatures,n=e.PointFeatures,o=e.PolygonFeatures;e.Basemap;var s=e.type,c=r.length>0&&"line"===s,l=n.length>0&&"point"===s,p=o.length>0&&"polygon"===s;c&&u.push(a(r,t)),l&&u.push(a(n,t)),p&&u.push(a(o,t))})),s.forEach((function(e){return u.push(o(e.name,e.url))})),[2,r([],u,!0)]}}))}))},u.prototype.getSceneArticles=function(){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,this.articleProxyParser.getAll()];case 1:return[2,e.sent()]}}))}))},u.prototype.getSceneDetailArticleByTitle=function(r,i){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,this.articleProxyParser.getDetailByTitle(r,i)];case 1:return[2,e.sent()]}}))}))},u}();export{u as default};
//# sourceMappingURL=index.js.map
